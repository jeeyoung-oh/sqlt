conn tuning/tuning
1)
create table dept as select * from scott.dept;
create table emp as select * from scott.emp;

alter table dept add constraint dept_pk primary key(deptno);
create index emp_deptno_idx on emp (deptno);

exec dbms_stats.gather_table_stats(user, 'emp');
exec dbms_stats.gather_table_stats(user, 'dept');

2)
set autot on exp

select * from emp
where  deptno in (select deptno from dept);


3)
select * 
from  (select deptno from dept) a, emp b
where  b.deptno = a.deptno;

select emp.* from dept, emp
where  emp.deptno = dept.deptno;

4)
select * from emp
where  deptno in (select /*+ no_unnest */ deptno from dept);

5) 서브쿼리 unnest인경우 먼저읽는 테이블선정이 가능함
select /*+ leading(emp) */ * from emp 
where deptno in (select /*+ unnest */ deptno from dept);

select /*+ leading(dept) */ * from emp 
where deptno in (select /*+ unnest */  deptno from dept);

select /*+  leading(dept@aaa) */ * from emp 
where deptno in (select /*+ unnest qb_name(aaa) */ deptno from dept);

6) dept테이블 부서번호를 nonunique로 변경
alter table dept drop primary key;
create index dept_deptno_idx on dept(deptno);
exec dbms_stats.gather_table_stats(user, 'dept');

select * from emp
where  deptno in (select deptno from dept);
      
