sqlplus  tuning/tuning
1.  alter session set statistics_level=all;
    set linesize 150
create index IX_ORDERS_N1 on orders (orderdate) ;
2.SELECT  /*+ index(A IX_ORDERS_N1)*/ ORDERNO, ORDERDATE, PAYTYPE
     , CUSTNO, TOTAL
  FROM ORDERS A
 WHERE ORDERDATE >= TO_DATE('20180805', 'YYYYMMDD')
   AND ORDERDATE < TO_DATE('20190809', 'YYYYMMDD')
   AND STATUS = '배송중';

SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(NULL, NULL, 'ALLSTATS LAST -ROWS'));

4.  exec clean_index; 
 create index IX_ORDERS_N1 on orders (orderdate, status) ;

5. SELECT  /*+ index(A IX_ORDERS_N1)*/ ORDERNO, ORDERDATE, PAYTYPE
     , CUSTNO, TOTAL
  FROM ORDERS A
 WHERE ORDERDATE >= TO_DATE('20180805', 'YYYYMMDD')
   AND ORDERDATE < TO_DATE('20190809', 'YYYYMMDD')
   AND STATUS = '배송중';

SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(NULL, NULL, 'ALLSTATS LAST -ROWS'));

 
6.
exec clean_index;
create index IX_ORDERS_N1 on orders (orderdate) ;
--성능개선문제
1) 
 select min(orderdate) from  orders; 
 @ xplan
또는
 SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(NULL, NULL, 'ALLSTATS LA
 select max(orderdate) from  orders; 
 @xplan
개선문제1> 
select min(orderdate), max(orderdate) from orders  ; 
    @xplan

개선후>>
SELECT MIN(d1) , MAX(d1)
FROM ( 
 select min(orderdate) d1 from orders
  UNION ALL
 select max(orderdate) from orders )    ; 
 @xplan
개선문제2>-- 기존 인덱스(IX_ORDERS_N1) 사용하도록 유도해서 속도 개선해보기 .
SELECT MAX(ORDERDATE)
  FROM ORDERS
 WHERE paytype = '신용카드' ;
 @xplan

 비교1> 힌트사용해서 인덱스 사용유도 
   select /*+ index_desc ( orders  IX_ORDERS_N1)*/ MAX(ORDERDATE)
  FROM ORDERS
 WHERE paytype = '신용카드'  and orderdate < to_Date('9999','yyyy') 
  ORDER BY  orderdate DESC  ;
SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(NULL, NULL, 'ALLSTATS LAST -ROWS'));
비교2> 
SELECT *
FROM (  select /*+ index_desc ( orders  IX_ORDERS_N1)*/ MAX(ORDERDATE)
         FROM ORDERS
       WHERE paytype = '신용카드'  and orderdate < to_Date('9999','yyyy') 
      ORDER BY  orderdate DESC ) A
WHERE rownum  =1 ; 
@xplan 

비교3>
select /*+ index_desc ( orders  IX_ORDERS_N1)*/ MAX(ORDERDATE)
         FROM ORDERS
       WHERE paytype =  '신용카드' AND ROWNUM=1; 
@xplan 

비교4> 
   SELECT *
   FROM (  select orderdate
                from orders
                where paytype= '신용카드'   and orderdate < to_Date('9999','yyyy') 
            ORDER BY  orderdate DESC  ) A
   WHERE  rownum =1; 
@xplan